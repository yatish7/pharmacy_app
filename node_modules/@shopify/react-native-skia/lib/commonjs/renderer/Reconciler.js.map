{"version":3,"names":["_reactReconciler","_interopRequireDefault","require","_HostConfig","_Container","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","skiaReconciler","ReactReconciler","skHostConfig","injectIntoDevTools","bundleType","version","rendererPackageName","SkiaRoot","constructor","redraw","getNativeId","container","Container","root","createContainer","console","error","render","element","updateContainer","hostDebug","unmount","unmounted","dom","exports"],"sources":["Reconciler.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\nimport type { OpaqueRoot } from \"react-reconciler\";\nimport ReactReconciler from \"react-reconciler\";\n\nimport { skHostConfig, debug as hostDebug } from \"./HostConfig\";\nimport { Container } from \"./Container\";\n\nconst skiaReconciler = ReactReconciler(skHostConfig);\n\nskiaReconciler.injectIntoDevTools({\n  bundleType: 1,\n  version: \"0.0.1\",\n  rendererPackageName: \"react-native-skia\",\n});\n\nexport class SkiaRoot {\n  private root: OpaqueRoot;\n  private container: Container;\n\n  constructor(\n    redraw: () => void = () => {},\n    getNativeId: () => number = () => 0\n  ) {\n    this.container = new Container(redraw, getNativeId);\n    this.root = skiaReconciler.createContainer(\n      this.container,\n      0,\n      null,\n      true,\n      null,\n      \"\",\n      console.error,\n      null\n    );\n  }\n\n  render(element: ReactNode) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    skiaReconciler.updateContainer(element as any, this.root, null, () => {\n      hostDebug(\"updateContainer\");\n    });\n  }\n\n  unmount() {\n    this.container.unmounted = true;\n    skiaReconciler.updateContainer(null, this.root, null, () => {\n      hostDebug(\"unmountContainer\");\n    });\n  }\n\n  get dom() {\n    return this.container.root;\n  }\n}\n"],"mappings":";;;;;;AAEA,IAAAA,gBAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AAAwC,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAG,gBAAAH,CAAA,EAAAI,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAJ,CAAA,GAAAO,MAAA,CAAAC,cAAA,CAAAR,CAAA,EAAAI,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAZ,CAAA,CAAAI,CAAA,IAAAC,CAAA,EAAAL,CAAA;AAAA,SAAAM,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAL,CAAA,GAAAK,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAhB,CAAA,QAAAa,CAAA,GAAAb,CAAA,CAAAiB,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA;AAExC,MAAMgB,cAAc,GAAG,IAAAC,wBAAe,EAACC,wBAAY,CAAC;AAEpDF,cAAc,CAACG,kBAAkB,CAAC;EAChCC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,OAAO;EAChBC,mBAAmB,EAAE;AACvB,CAAC,CAAC;AAEK,MAAMC,QAAQ,CAAC;EAIpBC,WAAWA,CACTC,MAAkB,GAAGA,CAAA,KAAM,CAAC,CAAC,EAC7BC,WAAyB,GAAGA,CAAA,KAAM,CAAC,EACnC;IAAA5B,eAAA;IAAAA,eAAA;IACA,IAAI,CAAC6B,SAAS,GAAG,IAAIC,oBAAS,CAACH,MAAM,EAAEC,WAAW,CAAC;IACnD,IAAI,CAACG,IAAI,GAAGb,cAAc,CAACc,eAAe,CACxC,IAAI,CAACH,SAAS,EACd,CAAC,EACD,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,EAAE,EACFI,OAAO,CAACC,KAAK,EACb,IACF,CAAC;EACH;EAEAC,MAAMA,CAACC,OAAkB,EAAE;IACzB;IACAlB,cAAc,CAACmB,eAAe,CAACD,OAAO,EAAS,IAAI,CAACL,IAAI,EAAE,IAAI,EAAE,MAAM;MACpE,IAAAO,iBAAS,EAAC,iBAAiB,CAAC;IAC9B,CAAC,CAAC;EACJ;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACV,SAAS,CAACW,SAAS,GAAG,IAAI;IAC/BtB,cAAc,CAACmB,eAAe,CAAC,IAAI,EAAE,IAAI,CAACN,IAAI,EAAE,IAAI,EAAE,MAAM;MAC1D,IAAAO,iBAAS,EAAC,kBAAkB,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEA,IAAIG,GAAGA,CAAA,EAAG;IACR,OAAO,IAAI,CAACZ,SAAS,CAACE,IAAI;EAC5B;AACF;AAACW,OAAA,CAAAjB,QAAA,GAAAA,QAAA","ignoreList":[]}